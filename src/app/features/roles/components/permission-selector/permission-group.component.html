<div class="permission-group">
  <div class="group-header">
    <h4 class="module-name">{{ group.module }}</h4>
    <div class="actions">
      <app-button
        (click)="onSelectAll()"
        type="default"
        [disabled]="readonly || isSaving"
        size="small"
      >
        Select All
      </app-button>
      <app-button
        (click)="onDeselectAll()"
        type="default"
        [disabled]="readonly || isSaving"
        size="small"
      >
        Deselect All
      </app-button>
    </div>
  </div>

  <div class="permissions-list">
    @for (permission of group.permissions; track permission.id) {
      <app-permission-card
        [permission]="permission"
        [isAssigned]="isAssigned(permission.id)"
        [saving]="savingPermissionId === permission.id"
        [readonly]="readonly || savingModule === group.module"
        (assign)="assign.emit($event)"
        (unassign)="unassign.emit($event)"
      />
    }
  </div>
</div>
