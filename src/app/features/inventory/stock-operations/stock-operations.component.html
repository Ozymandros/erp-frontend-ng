<div class="stock-operations">
  <div class="page-header">
    <h1 nz-typography>Inventory Operations</h1>
  </div>

  <div nz-row [nzGutter]="24">
    <div nz-col [nzXs]="24" [nzLg]="12">
      <nz-card nzTitle="Manual Stock Adjustment">
        <form
          nz-form
          [formGroup]="adjustmentForm"
          (ngSubmit)="submitAdjustment()"
          nzLayout="vertical"
        >
          <nz-form-item>
            <nz-form-label nzRequired>Product</nz-form-label>
            <nz-form-control nzErrorTip="Please select a product!">
              <app-select
                formControlName="productId"
                [options]="products"
                labelKey="name"
                valueKey="id"
                [showSearch]="true"
                [serverSearch]="true"
                placeholder="Search products by name or SKU..."
                [loading]="productSearching"
                (searchQuery)="onProductSearch($event)"
              ></app-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzRequired>Warehouse</nz-form-label>
            <nz-form-control nzErrorTip="Please select a warehouse!">
              <app-select
                formControlName="warehouseId"
                [options]="warehouses"
                labelKey="name"
                valueKey="id"
                [showSearch]="true"
                [serverSearch]="true"
                placeholder="Search warehouses..."
                [loading]="warehouseSearching"
                (searchQuery)="onWarehouseSearch($event)"
              ></app-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzRequired>Quantity Adjustment</nz-form-label>
            <nz-form-control nzExtra="Positive for additions, negative for removals">
              <app-input-number
                formControlName="quantity"
                [step]="1"
                class="full-width-input"
              ></app-input-number>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label>Reason / Reference</nz-form-label>
            <nz-form-control>
              <app-textarea
                formControlName="reason"
                placeholder="e.g. Damage, inventory count, transfer"
                [rows]="3"
              ></app-textarea>
            </nz-form-control>
          </nz-form-item>

          <div class="form-actions mt-4">
            <app-button
              type="primary"
              btnType="submit"
              [loading]="submitting"
              [disabled]="!adjustmentForm.valid || submitting"
              [block]="true"
              size="large"
            >
              Apply Adjustment
            </app-button>
          </div>
        </form>
      </nz-card>
    </div>

    <!-- Future expansion: could add bulk operations or stock transfers here -->
  </div>
</div>
