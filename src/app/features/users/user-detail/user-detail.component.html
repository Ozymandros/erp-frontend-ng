<div class="user-detail">
  <div class="page-header">
    <button nz-button nzType="default" routerLink="/users">
      <span nz-icon nzType="arrow-left"></span>
      Back to List
    </button>
    <h1>{{ isEditMode ? 'Edit User' : 'Create User' }}</h1>
  </div>

  <nz-card [nzLoading]="loading">
    <form nz-form [formGroup]="userForm" (ngSubmit)="save()">
      <div nz-row [nzGutter]="16">
        <div nz-col [nzXs]="24" [nzSm]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Username</nz-form-label>
            <nz-form-control nzErrorTip="Please input username!">
              <input nz-input formControlName="username" placeholder="Username" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Email</nz-form-label>
            <nz-form-control nzErrorTip="Please input a valid email!">
              <input nz-input formControlName="email" type="email" placeholder="Email" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div nz-row [nzGutter]="16">
        <div nz-col [nzXs]="24" [nzSm]="12">
          <nz-form-item>
            <nz-form-label>First Name</nz-form-label>
            <nz-form-control>
              <input nz-input formControlName="firstName" placeholder="First Name" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="12">
          <nz-form-item>
            <nz-form-label>Last Name</nz-form-label>
            <nz-form-control>
              <input nz-input formControlName="lastName" placeholder="Last Name" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div nz-row [nzGutter]="16" *ngIf="!isEditMode">
        <div nz-col [nzXs]="24" [nzSm]="12">
          <nz-form-item>
            <nz-form-label nzRequired>Password</nz-form-label>
            <nz-form-control nzErrorTip="Password is required!">
              <input nz-input formControlName="password" type="password" placeholder="Password" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div nz-row [nzGutter]="16">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label>Active Status</nz-form-label>
            <nz-form-control>
              <nz-switch formControlName="isActive"></nz-switch>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div nz-row [nzGutter]="16">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label>Roles</nz-form-label>
            <nz-form-control>
              <nz-select formControlName="roleIds" nzMode="multiple" nzPlaceHolder="Select roles">
                <nz-option *ngFor="let role of allRoles" [nzValue]="role.id" [nzLabel]="role.name"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <div class="form-actions">
        <button nz-button nzType="primary" type="submit" [nzLoading]="saving" [disabled]="!userForm.valid">
          {{ isEditMode ? 'Update' : 'Create' }}
        </button>
        <button nz-button nzType="default" type="button" routerLink="/users">Cancel</button>
      </div>
    </form>
  </nz-card>
</div>
